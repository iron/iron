os:
- linux
env:
  matrix:
  - LD_LIBRARY_PATH=/usr/local/lib:/usr/local/lib/rustlib/x86_64-unknown-linux-gnu/lib/
  global:
    secure: JanMk7b+R2ya8+0BwxyAqIqsLVRF7YrrR+1qAfW3xsyknug/7HY7mQzI8AojAbE/27gyueHiabM9asRVWhRYoYPgu4mVHZv/pnB9B4SSdXNN27x/MhinsKiSAKf+RC/nCvKG7LPVy3ToukMQUq7mEJA2sO8mQn3g8cUHSCAvB0k=
install:
- curl https://static.rust-lang.org/rustup.sh | sudo sh
script:
- cargo build --verbose
- cargo test --verbose
- cargo doc
after_success: '[ $TRAVIS_BRANCH = master ] && [ $TRAVIS_PULL_REQUEST = false ] &&
  git clone https://github.com/iron/iron.github.io.git docs && curl https://raw.githubusercontent.com/iron/iron.github.io/master/head.html
  > head.html && curl https://raw.githubusercontent.com/iron/iron.github.io/master/header.html
  > header.html && curl https://raw.githubusercontent.com/iron/iron.github.io/master/footer.html
  > footer.html && rustdoc -L ./target/deps -o ./docs/doc src/lib.rs --html-in-header
  ./head.html --html-before-content ./header.html --html-after-content ./footer.html
  && pushd docs && git add --all && git config user.name "iron-bot" && git config
  user.email "ironframework@gmail.com" && git commit -m "(docs-autogen) ${TRAVIS_REPO_SLUG}."
  && git push -q https://${TOKEN}@github.com/iron/iron.github.io.git master '
